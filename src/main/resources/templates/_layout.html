<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"/>
  <script src="/assets/thyme@1.0.0.js"></script>
  <script>Thyme.locale = 'en';</script>
  <link rel="icon" type="image/svg" href="/assets/favicon.svg"/>
  <link rel="stylesheet" href="/assets/app.css"/>
  <title layout:title-pattern="$CONTENT_TITLE - $LAYOUT_TITLE">[[${appName}]]</title>
</head>
<body>

<header>
  <main>
    <a href="/"><img class="logo" src="/assets/logo.svg"/></a>
    <form action="" class="search-bar">
      <input class="search-text" type="search" maxlength="30" placeholder="Search..."
       name="keyword" th:value="${condition?.keyword}"/>
    </form>

    <nav>
      <menu>
        <a><img src="/assets/triangle.svg"/><span>Explore</span></a>
        <div><a class="tag-item" href="/starred">Starred</a><a class="tag-item" href="/explore">More...</a></div>
      </menu>
      <menu th:each="metafield: ${settings.metafields}" th:if="${metafield.enums != null}">
        <a><img src="/assets/triangle.svg"/><span>[[${metafield.label}]]</span></a>
        <div><a class="tag-item" th:each="enum: ${metafield.enums}" th:href="|/?${metafield.name}=${enum.code}|">[[${enum.label}]]</a></div>
      </menu>
      <menu th:if="${principal}">
        <a><img src="/assets/triangle.svg"/><span>Console</span></a>
        <div>
          <a class="tag-item" href="/~/metadata">Metadata</a>
          <a class="tag-item" href="/~/library">Library</a>
          <a class="tag-item" href="/~/settings">Settings</a>
          <hr><a class="tag-item" href="/~/logout">Logout</a>
        </div>
      </menu>
      <menu th:unless="${principal}">
        <a href="/~/login"><img src="/assets/circle.svg"/><span>Login</span></a>
      </menu>
    </nav>
  </main>

  <script>
    function filter(field) {
      const keyword = field.value = field.value.trim();
      location.href = '?keyword=' + keyword;
    }
  </script>
</header>

<main layout:fragment="main"></main>
<footer>
  <main>
    <img class="logo" src="/assets/logo.svg"/>
    <div>[[${appDescription}]]</div>
    <div>ðŸ„¯ Copyleft <a target="_blank" href="https://github.com/metadream/cinemora">[[${appDescription}]]</a> is Licensed <a target="_blank" href="https://www.gnu.org/licenses/gpl-3.0.html">GPL 3.0</a></div>
  </main>
</footer>
</body>
</html>